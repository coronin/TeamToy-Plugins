<style type="text/css">
ul.ziwo
{
	margin:0px;
	padding:0px;	
}

ul.ziwo li
{
	display: block;
	list-style: disc;
	line-height:25px;
	vertical-align: text-bottom;
	padding-bottom:3px;
	border-bottom: 1px solid #f3f3f3;
	margin-bottom:5px;
	white-space: wrap;
	word-wrap: break-word;
	word-break: break-all;
}

ul.ziwo li:last-child,ul.ziwo.nodata li
{
	border:0px;
}

ul.ziwo li a
{
	color:#666;
}


ul.ziwo li.star a
{
	color: #0194C4;
}

ul.ziwo li.done a
{
	text-decoration: line-through;
	color:#aaa;
}

.flow_block
{
	padding:10px;
	border: 1px solid #eee;
	background: white;
	width: 600px;
  	margin: 5px;
  	float: left;
  	min-height: 100px;
}



</style>
<h2 class="main_board"><?=__('PL_ZIWO_TITLE')?></h2>
<div class="line"></div>
<?php
 if( isset($uids) && is_array($uids) ): ?>
	<div id="ziwo_list">
	<?php foreach( $uids as $uiditem ): ?>
		<div id="ziwo_<?=$uiditem['id']?>" uid="<?=$uiditem['id']?>" class="toload flow_block"></div>
	<?php endforeach; ?>
	</div>
	<script type="text/javascript">
	function be_a_queue()
	{
  		$('#ziwo_list').masonry(
  		{
    		// options
    		itemSelector : '.flow_block',
    		columnWidth : 5,
    		animationOptions: 
    		{
    			duration: 400
  			}
  		});
	}

	function load_ziwo()
	{
		var len = $('#ziwo_list div.toload').length;
		if( len < 1 ) return false;

		var obj = $('#ziwo_list div.toload').first();
		var uid = $(obj).attr('uid');
		if( parseInt(uid) < 1 ) return false;
				
		 
		var url = '?c=plugin&a=ziwo_item&uid='+uid;
		$.post( url , {}  , function( data )
		{	
			$('#ziwo_'+uid).html(data);
			$('#ziwo_'+uid).removeClass('toload');
			if( len == 1 ) 
				be_a_queue();
			else
				load_ziwo();
		} );
	}

	load_ziwo();
	
	
	</script>
<?php endif; ?>	